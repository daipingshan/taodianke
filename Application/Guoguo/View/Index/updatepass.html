<include file="Common:header" />
<include file="Common:nav" />
<div id="page-wrapper">
    <include file="Common:message_tip" />
    <div class="row">
        <div class="col-lg-12">
            <h1 class="page-header">修改密码</h1>
        </div>
        <!-- /.col-lg-12 -->
    </div>
    <!-- /.row -->
    <div class="panel-body">
        <form role="form" id="form-login" method="post" action="">
            <fieldset>
                <div class="form-group">
                    <label>原始密码：</label>
                    <input class="form-control" id='password' placeholder="原始密码" name="password" type="text" autofocus>
                </div>
                <div class="form-group">
                    <label>新密码：</label>
                    <input class="form-control" id='npassword' placeholder="新密码" name="npassword" type="password" value="">
                </div>
                <div class="form-group">
                    <label>确认新密码：</label>
                    <input class="form-control" id='qpassword' placeholder="确认新密码" name="qpassword" type="password" value="">
                </div>
                <!-- 使用时删除 “a”标签 input 取消注释 -->
                <a href="javascript:void(0);" id="btn-login" class="btn btn-lg btn-success btn-block">修改</a>
            </fieldset>
        </form>
    </div>

</div>
<include file="Common:footer" />
<script>
    $(function(){
        // 点击登录按钮
        $('#btn-login').click(function(){

            var $this = $(this);
            var $form = $this.parents('form#form-login');
            var password = $form.find('input#password').val();
            var npassword = $form.find('input#npassword').val();
            var qpassword = $form.find('input#qpassword').val();
            if(!$.trim(password)){
                show_message_tip({error:'请输入密码'});
                return false;
            }
            if(npassword!=qpassword){
                show_message_tip({error:'两次输入新密码不对'});
                return false;
            }
            if($this.hasClass('disabled')){
                return false;
            }
            $this.addClass('disabled');
            $this.html('正在修改密码请稍后...');
            window.setTimeout(function() {
                $form.submit();
            }, 1500);
            return false;
        });
    })
</script>